<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Waiting...</title>
</head>
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/oidc-client-ts/2.0.2/browser/oidc-client-ts.min.js"></script>
  <script>
      const userManager = new oidc.UserManager({
          authority: 'https://identity.nanrong.store',
          scope: 'openid offline_access',
          client_id: 'hejing-ui',
          redirect_uri: window.location.origin + '/callback.html',
          response_type: 'code',
          userStore: new oidc.WebStorageStateStore({ store: window.localStorage }),
      });

      (async () => {
          try {
              await userManager.signinCallback();
          } catch (e) {
              console.error(e);
          } finally {
              window.location.replace('../');
          }
      })();
  </script>
</body>
</html>
